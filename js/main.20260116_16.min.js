!function(){"use strict";var e=document.getElementById("main-nav");if(e){var t=!1;try{t=window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}catch(e){}document.addEventListener("DOMContentLoaded",function(){var s;document.addEventListener("click",function(e){var t=e.target&&e.target.closest?e.target.closest("#main-nav li.has-sub > a"):null;if(t){var a=t.closest("#main-nav li.has-sub");if(a){e.preventDefault();var s=!a.classList.contains("is-open");n(a),s?(a.classList.add("is-open"),a.classList.add("hovering"),t.setAttribute("aria-expanded","true")):(a.classList.remove("is-open"),a.classList.remove("hovering"),t.setAttribute("aria-expanded","false"))}}else e.target&&e.target.closest&&e.target.closest("#main-nav")||n()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&n()}),t&&e.addEventListener("mouseleave",function(){n()}),t&&a("#main-nav li.has-sub",e).forEach(function(e){var t=null;e.addEventListener("mouseenter",function(){t&&(clearTimeout(t),t=null),e.classList.add("hovering")}),e.addEventListener("mouseleave",function(){t&&clearTimeout(t),t=setTimeout(function(){e.classList.remove("hovering"),e.classList.remove("is-open")},0)})}),document.addEventListener("click",function(e){e.target&&e.target.closest&&e.target.closest("[data-to-top]")&&window.scrollTo({top:0,behavior:"smooth"})}),s=location.pathname.replace(/\/index\.html$/,"/"),a("#main-nav a, #main-nav .submenu a",document).forEach(function(e){try{var t=e.getAttribute("href");if(!t)return;if(new URL(t,location.origin).pathname.replace(/\/index\.html$/,"/")===s){e.classList.add("active");var a=e.closest(".has-sub");if(a){var n=a.querySelector(":scope > a");n&&n.classList.add("active")}}}catch(e){}})})}function a(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function n(e){a("#main-nav li.has-sub.is-open",document).forEach(function(t){if(!e||t!==e){t.classList.remove("is-open"),t.classList.remove("hovering");var a=t.querySelector(":scope > a, :scope > button");a&&a.setAttribute("aria-expanded","false")}})}}();
/* 홈 아이콘은 배너(홈 링크)와 동일한 주소로 이동 */
document.addEventListener('click', function(e){
  var a = e.target && e.target.closest ? e.target.closest('a.nav-home') : null;
  if(!a) return;
  var hero = document.querySelector('.hero-home-link');
  var url = hero && hero.getAttribute('href') ? hero.getAttribute('href') : '/';
  e.preventDefault();
  window.location.href = url;
});

;(function(){try{var links=document.querySelectorAll('a.nav-home');if(!links||!links.length)return;var p=location.pathname||'';var base;if(p.indexOf('/pages/')!==-1){base=p.split('/pages/')[0];}else{base=p.replace(/\/[^\/]*$/,'');}if(!base)base='';var href=base+'/index.html';links.forEach(function(el){el.setAttribute('href',href);});}catch(e){}})();




/* NAV+HERO (auto): collapse hero behind menu; keep menu pinned on top */
(function(){
  function initNavHero(){
    var hero = document.querySelector('.hero-main');
    var nav = document.querySelector('.main-nav-bar');
    if(!nav) return;

    // nav height
    function navH(){
      return Math.ceil(nav.getBoundingClientRect().height || 64);
    }

    function heroBaseH(){
      if(!hero) return 0;
      var cs = getComputedStyle(document.documentElement);
      var v = cs.getPropertyValue('--hero-h-base').trim();
      var n = parseInt(v,10);
      if(!isNaN(n)) return n;
      // fallback to current hero height
      return Math.ceil(hero.getBoundingClientRect().height || 260);
    }

    function tick(){
      var nH = navH();
      document.documentElement.style.setProperty('--nav-h', nH + 'px');

      var base = heroBaseH();
      var y = window.scrollY || 0;

      if(hero){
        var collapse = Math.min(y, Math.max(0, base)); // 0..base
        document.documentElement.style.setProperty('--hero-collapse', collapse + 'px');

        // when hero is fully collapsed (or nearly), lock nav fixed
        var shouldFix = y >= (base - nH);
        if(shouldFix){
          nav.classList.add('is-fixed');
          document.body.classList.add('has-fixed-nav');
        }else{
          nav.classList.remove('is-fixed');
          document.body.classList.remove('has-fixed-nav');
        }
      }else{
        // pages without hero: always fixed
        nav.classList.add('is-fixed');
        document.body.classList.add('has-fixed-nav');
      }
    }

    window.addEventListener('scroll', tick, {passive:true});
    window.addEventListener('resize', tick, {passive:true});
    tick();
  }

  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', initNavHero);
  }else{
    initNavHero();
  }
})();

